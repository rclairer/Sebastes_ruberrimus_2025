# Executive Summary{-}

<!-- 
Note r4ss::table_exec_summary() will create the required tables. 
It currently makes them as csv files. 
sa4ss::es_table_tex will convert them to text files formatted as LaTeX tables if you prefer.
-->

## Stock{-}

<!-- Species/area, including an evaluation of any potential biological basis for regional management -->

Yelloweye Rockfish (*Sebastes ruberrimus*) are found from the Gulf of Alaska to northern Baja California in Mexico across the northeastern Pacific Ocean. Their core distribution is from southeast Alaska to central California on the west coast of the United States. Yelloweye Rockfish are strongly associated with rocky bottom habtiat and adults are considered to be solitary and sedentary after settlement. Given the general perception of the sedentary nature of Yelloweye Rockfish adults and the moderate amount of mixing that occurs during the pelagic larval stage, the previous Yelloweye Rockfish assessment modeled the West coast population as a two-area assessment (California and a combined Oregon-Washington area) with a common stock recruitment relationship. This update assessment maintains this basic structure. 

## Catches{-}

Catches for Yelloweye Rockfish have averaged over 20 mt in recent years (@fig-es-landings, @tbl-es-catches **not sure if correct table?**). Yelloweye Rockfish was declared overfished in 2002 and remains under a rebuilding plan that substantially limits catch. However, as other rockfish stocks have rebuilt and Yelloweye Rockfish has progressed under it's rebuilding plan, catches have slowly increased in recent years, primarily in the Oregon-Washington non-trawl fleet and the recreational fleets. 

```{r, tbl-es-catches, results = "asis"}
#| label: tbl-es-catches
#| warning: false
#| echo: false
#| eval: !expr eval_tables 
#| tbl-cap: !expr if(eval_tables) catches_es_cap 
#| tbl-pos: H

catches_es_table |>
  gt::gt() |>
  gt::fmt_number(
    columns = 2:9, # depends on number of fleets with catch
    decimals = 2
  ) |>
  gt::tab_options(
    table.font.size = 12,
    # if want to not have tables the width of the page include the below option:
    latex.use_longtable = TRUE 
  ) |>
  gt::cols_align(
    align = "center"
  ) |>
  gt::as_latex()

```

```{r, fig-es-landings} 
#| label: fig-es-landings
#| echo: false 
#| warning: false 
#| eval: true 
#| fig-cap: "Landings in metric tons (mt) by year for each fleet."

knitr::include_graphics("figures/r4ss_plots/plots/catch2_landings_stacked.png")

```

\clearpage

## Data and Assessment{-}

<!-- Date of last assessment, type of assessment model, data available, new information, and information lacking. -->

The last assessment for Yelloweye Rockfish occurred in 2017. This update assessment extends the data used in the 2017 assessment through 2024. Data includes catch, length and age data from seven fishery fleets and multiple indices of abundance in California and Oregon/Washington. Two new historical catch reconstructions from Oregon and Washington were incorporated. Four indices of abundance were updated for this assessment, including two recreational fishery indices in Oregon, the West Coast Groundfish Bottom Trawl Survey, and the IPHC longline survey. In addition, sample sizes and assignment of aging error were corrected in the compositional data. No new data were considered in this update assessment. 

## Stock biomass and dynamics{-}

The model estimates that the stock was below the minimum stock size threshold in the late 1990s and was lowest in the early 2000s before increasing over the last 20 years (@fig-es-sb). The 2024 relative estimated spawning output is just below the management target threshold. 

<!-- Trends and current levels relative to virgin or historic levels, description of uncertainty-include table for last 10 years and graph with long term estimates. -->

```{r, tbl-es-sb, results = "asis"}
#| label: tbl-es-sb
#| warning: false
#| echo: false
#| eval: !expr eval_tables 
#| tbl-cap: !expr if(eval_tables) ssb_es_cap 
#| tbl-pos: H

ssb_es_table |>
  gt::gt() |>
  gt::fmt_number(
    columns = 2:4,
    decimals = 2
  ) |>
  gt::fmt_number(
    columns = 5:7,
    decimals = 3
  ) |>
  gt::tab_options(
    table.font.size = 12,
    latex.use_longtable = TRUE 
  ) |>
  gt::cols_align(
    align = "center"
  ) |>
  gt::cols_width(
    tidyselect::everything() ~ px(75)
  ) |>
  gt::as_latex()
```

```{r} 
#| label: fig-es-sb
#| echo: false 
#| warning: false 
#| eval: true 
#| fig-cap: "Estimated time series of relative spawning output for the base model."
#| fig-alt: "See table 26 for values."
#| fig-pos: H

knitr::include_graphics("figures/r4ss_plots/plots/ts9_Relative_spawning_output_intervals.png")

```

\clearpage

## Recruitment{-}

<!-- Trends and current levels relative to virgin or historic levels-include table for last 10 years and graph with long term estimates. -->


```{r, tbl-es-recr, results = "asis"}
#| label: tbl-es-recr
#| warning: false
#| echo: false
#| eval: !expr eval_tables 
#| tbl-cap: !expr if(eval_tables) recr_es_cap 
#| tbl-pos: H

recr_es_table |>
  gt::gt() |>
  gt::fmt_number(
    columns = 2:4,
    decimals = 0
  ) |>
  gt::fmt_number(
    columns = 5:7,
    decimals = 3
  ) |>
  gt::tab_options(
    table.font.size = 12,
    latex.use_longtable = TRUE 
  ) |>
  gt::cols_align(
    align = "center"
  ) |>
  gt::cols_width(
    tidyselect::everything() ~ px(75)
  ) |>
  gt::as_latex()

```

\clearpage

## Exploitation status{-}

<!-- Exploitation rates (i.e., total catch divided by exploitable biomass, or the annual SPR harvest rate) - include a table with the last 10 years of data and a graph showing the trend in fishing mortality relative to the target (y-axis) plotted against the trend in biomass relative to the target (x-axis). -->

```{r, tbl-es-spr, results = "asis"}
#| label: tbl-es-spr
#| warning: false
#| echo: false
#| eval: !expr eval_tables 
#| tbl-cap: !expr if(eval_tables) spr_es_cap 
#| tbl-pos: H

spr_es_table |>
  gt::gt() |>
  gt::fmt_number(
    columns = 2:7,
    decimals = 3
  ) |>
  gt::tab_options(
    table.font.size = 12,
    latex.use_longtable = TRUE 
  ) |>
  gt::cols_align(
    align = "center"
  ) |>
  gt::cols_width(
    tidyselect::everything() ~ px(80)
  ) |>
  gt::as_latex()
```

## Ecosystem considerations{-}

## Reference points{-}

<!-- Management targets and definitions of overfishing, including the harvest rate that brings the stock to equilibrium at B24% for flatfishes and B40% for all other groundfish stocks (BMSY proxies) and the equilibrium stock size that results from fishing at the default harvest rate (the FMSY proxy). Include a summary table that compares estimated reference points for SSB, SPR, Exploitation Rate and Yield based on SSB proxy for MSY, SPR proxy for MSY, and estimated MSY values. -->

```{r, tbl-ref-points-es-1, results = "asis"}
#| label: tbl-ref-points-es-1
#| warning: false
#| echo: false
#| eval: !expr eval_tables 
#| tbl-cap: !expr if(eval_tables) reference_points_cap 
#| tbl-pos: H

reference_points_table |>
  gt::gt() |>
  gt::fmt_number(
    columns = 2:4,
    rows = c(2:4, 7, 10, 12, 15, 17, 20),
    decimals = 0
  ) |>
  gt::fmt_number(
    columns = 2:4,
    rows = 1,
    decimals = 1
  ) |>
  gt::fmt_number(
    columns = 2:4,
    rows = c(5, 8, 9, 13:14, 18:19),
    decimals = 3
  ) |>
  gt::tab_options(
    table.font.size = 12,
    latex.use_longtable = TRUE 
  ) |>  
  gt::tab_style(
    style = list(
      gt::cell_text(style = "italic")
    ),
    locations = gt::cells_body(
      columns = "Reference Point",
      rows = dplyr::starts_with("Reference")
    )
  ) |>
  gt::sub_missing(
    columns = tidyselect::everything(),
    missing_text = "---"
  ) |>
  gt::as_latex()

```

\clearpage

## Management performance{-}

<!-- Catches in comparison to OFL, ABC, HG, and OY/ACL values for the most recent 10 years (when available), overfishing levels, actual catch and discard. Include OFL (encountered), OFL (retained) and OFL (dead) if different due to discard and discard mortality. -->

```{r, tbl-es-management, results = "asis"}
#| label: tbl-es-management
#| warning: false
#| echo: false
#| eval: !expr eval_tables 
#| tbl-cap: "Recent trend in the overfishing limits (OFL), the acceptable biological catches (ABCs), the annual catch limits (ACLs), and the total dead catch (landings + discards) all in metric tons (mt)."
#| tbl-pos: H

# yelloweye_management |>
recent_management_table |>
  dplyr::rename(`Total dead catch (mt)` = `Catch (mt)`) |>
  gt::gt() |>
  gt::tab_options(
    table.font.size = 12,
    latex.use_longtable = TRUE 
  ) |>
  gt::as_latex()

```

## Harvest projections{-}


::: {.landscape}

```{r, tbl-es-projections, results = "asis"}
#| label: tbl-es-projections
#| warning: false
#| echo: false
#| eval: !expr eval_tables 
#| tbl-cap: !expr if(eval_tables) projections_cap 
#| tbl-pos: H

projections_table |>
  gt::gt() |>
  gt::fmt_number(
    columns = c(2:5, 7:8),
    decimals = 0
  ) |>
  gt::fmt_number(
    columns = c(6, 9:10),
    decimals = 3
  ) |>
  gt::tab_options(
    table.font.size = 12,
    latex.use_longtable = TRUE 
  ) |>
  gt::sub_missing(
    columns = tidyselect::everything(),
    missing_text = "---"
  ) |>
  gt::cols_align(
    align = "center"
  ) |>
  gt::cols_width(
    everything() ~ px(75)
  ) |>
  gt::as_latex()

```

:::

\clearpage

## Decision table{-}

```{r, 1, results = "asis"}
#| label: tbl-es-decision-1
#| warning: false
#| echo: false
#| eval: !expr eval_tables 
#| tbl-cap: "!expr if(eval_tables) decision_table_cap" 
#| tbl-pos: H
table_decision(
  list(mod_low_A, mod_base_A, mod_high_A),
  list(mod_low_B, mod_base_B, mod_high_B),
  list(mod_low_C, mod_base_C, mod_high_C)
)

```

ADW - decision tables not needed until after review

## Scientific uncertainty{-}

## Research and data needs{-}

## Rebuilding projections{-}



{{< pagebreak >}}